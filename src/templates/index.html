{% extends "layout.html" %}

{% block title %}
TexTec
{% endblock %}

{% block body %}

<h2>Welcome to TexTec!</h2>
{% with messages = get_flashed_messages(category_filter=["success"]) %}
    {% if messages %}
    <div class="alert alert-success alert-dismissable fade show" role="alert">
      <ul>
      {% for message in messages %}
      <li>{{ message }} <a href="/">Close</a></li>
      {% endfor %}
      </ul>
      </div>
    {% endif %}
  {% endwith %}
</div>

<ul>
  {% for reference in references %}
    <li style="display: flex">
      <div>
        {{ reference }} 
      </div>
      {% if not reference.done %}
        <form action="/toggle_reference/{{ reference.id }}" method="post" style="margin-left: 10px;">
          <button type="submit">mark as done</button>
        </form>
      {% endif %}
    </li>
  {% endfor %}
</ul>

<div>
  <a href="/new">Add a new reference </a>
</div>
{% if references %}
  <a href="/export_bibtex_file">
    <button>Export BibTeX file</button>
  </a>
{% endif %}

{% endblock %}